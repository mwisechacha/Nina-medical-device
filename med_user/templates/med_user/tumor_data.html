<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Data Received - Ready to Predict</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/wait_for_device.css' %}">
    <style>
        .heatmap {
            display: grid;
            grid-template-columns: repeat(3, 80px);
            grid-gap: 5px;
            margin-top: 20px;
        }
        .heatmap-cell {
            width: 80px;
            height: 80px;
            text-align: center;
            line-height: 80px;
            font-size: 20px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <div class="logo-container">
        <img src="{% static 'images/nina-logo.png' %}" alt="Nina Logo">
    </div>

    <div class="loading-container">
        <img src="{% static 'images/hourglass.gif' %}" alt="hourglass animation">
        <p>Data received from device!</p>

        <h3>Heatmap (3x3)</h3>
        <div class="heatmap">
            {% for row in sensor_data %}
                {% for val in row %}
                    <div class="heatmap-cell" style="
                        background-color: 
                        {% if val < 5 %} #4caf50 
                        {% elif val < 10 %} #ffeb3b 
                        {% else %} #f44336 
                        {% endif %};
                        color: #000;">
                        {{ val|floatformat:1 }}
                    </div>
                {% endfor %}
            {% endfor %}
        </div>

        <form method="get" action="{% url 'predict_diagnosis' screening_id %}">
            <button type="submit" style="margin-top:20px;">Predict Diagnosis</button>
        </form>
    </div>
</body>
</html>
